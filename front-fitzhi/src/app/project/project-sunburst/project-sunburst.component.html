<mat-sidenav-container class="component-container" >

    <mat-sidenav *ngIf="!isActiveContext(PreviewContext.SUNBURST_IMPOSSIBLE)" mode="side" class="sidenav-toolbar" opened>

		<button 
			id="sunburst"
			data-toggle="tooltip" data-placement="right" title="Display the sunburst chart if ready"
			class="btn btn-outline-secondary rounded"
            [ngClass]="{'btn-outline-success' : buttonActivated(SUNBURST), 'btn-outline-secondary': !buttonActivated(SUNBURST)}" 
			[disabled]="buttonActivated(SUNBURST)"
			(click)="show(SUNBURST)">
			<i class="fas fa-chart-pie font-awesome-settings"></i>
		</button>

		<button 
			id="legend"
			data-toggle="tooltip" data-placement="right" title="Diagram legend. What does mean all these colors?"
			class="btn btn-outline-secondary rounded"
            [ngClass]="{'btn-outline-success' : buttonActivated(LEGEND_SUNBURST), 'btn-outline-secondary': !buttonActivated(LEGEND_SUNBURST)}" 
			[disabled]="buttonActivated(LEGEND_SUNBURST)"
			(click)="show(LEGEND_SUNBURST)">
			<i class="fas fa-question-circle font-awesome-settings"></i>
		</button>

		<button 
			id="settings"
			data-toggle="tooltip" data-placement="right" title="Filtering the diagram by date or developer"
			class="btn btn-outline-secondary rounded"
            [ngClass]="{'btn-outline-success' : buttonActivated(SETTINGS), 'btn-outline-secondary': !buttonActivated(SETTINGS)}" 
			[disabled]="buttonActivated(SETTINGS)"
			(click)="show(SETTINGS)">
			<i class="fas fa-sliders-h font-awesome-settings"></i>
		</button>

		<button 
			id="unknown"
			data-toggle="tooltip" data-placement="right" title="Ghosts list of the repository. unknown developers"
			class="btn btn-outline-secondary rounded"
            [ngClass]="{'btn-outline-success' : buttonActivated(UNKNOWN), 'btn-outline-secondary': !buttonActivated(UNKNOWN)}" 
			[disabled]="buttonActivated(UNKNOWN)"
			(click)="show(UNKNOWN)">
			<i class="fas fa-ghost font-awesome-settings"></i>
		</button>

		<button 
			id="dependencies"
			data-toggle="tooltip" data-placement="right" data-delay="10" title="Dependencies list detected or declared for this project"
			class="btn btn-outline-secondary rounded"
            [ngClass]="{'btn-outline-success' : buttonActivated(DEPENDENCIES), 'btn-outline-secondary': !buttonActivated(DEPENDENCIES)}" 
			[disabled]="buttonActivated(DEPENDENCIES)"
			(click)="show(DEPENDENCIES)">
			<i class="fab fa-elementor font-awesome-settings"></i>
		</button>

 		<button 
			id="reset"
			data-toggle="tooltip" data-placement="right" title="Reset the dashboard and regenerate a brand new one."
			class="btn btn-outline-secondary rounded"
            [ngClass]="{'btn-outline-success' : buttonActivated(RESET), 'btn-outline-secondary': !buttonActivated(RESET)}" 
			[disabled]="buttonActivated(RESET)"
			(click)="show(RESET)">
			<i class="fas fa-trash-alt font-awesome-settings"></i>
		</button>

	</mat-sidenav>
	
    <mat-sidenav-content class="sidenav__content--height">

		<div id="titleSunburst">
			{{titleSunburst}}  
		</div>

		<div id="warningSunburstImpossible" *ngIf="isActiveContext(PreviewContext.SUNBURST_IMPOSSIBLE)">
			<ul>
				<li>Either your project does not exist yet. and you have to complete the project, first.</li>
				<li>Or Techxh√¨ failed to connect with your source control system. Check your connection settings file on your server.</li>
			</ul>
			<a href="javascript:;" (click)="jumpToTab (-1)">You need to complete the project form.</a>
        </div>

		<!-- We do not use *ngIf because the dataSource needs to be created immediatly with their host component -->
		<!-- If not, the tables are not synchronized with the selected package, and always empty. -->
        <div [hidden]="!isActiveContext(PreviewContext.SUNBURST_READY)">
			<app-node-detail id="node-details" 
				[filenames]="filenames" 
				[contributors]="contributors" 
				[location]="location$">
			</app-node-detail>		
		</div>
		
		<div id="chart" class="divPanelOnTop" *ngIf="isActiveContext(PreviewContext.SUNBURST_READY)"></div>

		<div class="row" style="width: 100%" *ngIf="isActiveContext(PreviewContext.SUNBURST_WAITING)">
			<div class="col-md-1"></div>
            <div class="col-md-10 text-left w100">
				<mat-card style="margin-top:30px">
				  	<mat-card-content>
						<h4 class="text-progress-bar">Chart on preparation. Please wait !</h4>
						<section class="sunburst-progress-bar">
								<mat-progress-bar color="warn" mode="indeterminate" ></mat-progress-bar>	  
						</section>
					</mat-card-content>
				</mat-card>
				<div *ngIf="taskReportManagement.taskOk" 
					class="taskReport taskReportOk">{{taskReportManagement.taskReport$ | async}}
				</div>
				<div *ngIf="!taskReportManagement.taskOk" 
					class="taskReport taskReportError">{{taskReportManagement.taskReport$ | async}}
				</div>
				<app-ssewatcher [listen$]="listen$" url="/project/tasks/stream/dashboardGeneration/"></app-ssewatcher>
			</div>
			<div class="col-md-1"></div>
		</div>

		<div id="panelGhosts" class="row" *ngIf="isActiveContext(PreviewContext.SUNBURST_GHOSTS)">	
			<app-project-ghosts [dataSourceGhosts$]="dataSourceGhosts$" ></app-project-ghosts>
		</div>

		<div class="divPanel row" 
			*ngIf="isActiveContext(PreviewContext.SUNBURST_DEPENDENCIES)">		
			<app-table-dependencies class="content-divPanel">
			</app-table-dependencies>
		</div>

		<div class="divPanelOnTop row" 
			*ngIf="isActiveContext(PreviewContext.SUNBURST_LEGEND)">	
			<app-legend-sunburst class="divPanelOnTop"></app-legend-sunburst>
		</div>

    </mat-sidenav-content>
</mat-sidenav-container>


