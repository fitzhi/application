# Ubuntu Fitzhi container
# docker pull adoptopenjdk/openjdk11:x86_64-ubuntu-jre-11.0.15_10
FROM eclipse-temurin:11.0.15_10-jre
LABEL Frederic VIDAL (frederic.vidal@fitzhi.com)

RUN apt update; \
	apt-get -y install git; \
	apt-get -y install nginx; \
	mkdir spoq; \
	mkdir deploy

# URL where the Sonar server is installed
ARG urlSonarServer

# First authentification credential : user/password.
# User required to be identified by Sonar. Default is "admin"
ARG user
# Password required to be identified in Sonar.
# This property is mandatory if the connection is made with the pair user/password
ARG password

# Second authentification credential : token login.
# Login token generated by the Sonar security module.
ARG login

COPY spoq spoq

COPY deploy deploy

RUN	cd /; \
	echo "export DOCKER_FITZHI_BUILDTIME=#buildingTime" >> ~/.bashrc

WORKDIR /fitzhi/deploy/backend-fitzhi

CMD ./start-fitzhi.sh 
EXPOSE 80
